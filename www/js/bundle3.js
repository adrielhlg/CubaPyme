(()=>{const e="https://cubapyme.mooo.com/api";var t=document.getElementById("spinner-overlay");document.getElementById("registerUser").addEventListener("submit",(n=>{n.preventDefault(),t.style.display="block";const o=document.getElementById("fullname").value,a=document.getElementById("email").value,r=document.getElementById("password").value,i=document.getElementById("repeat-password").value;if(r!==i)return navigator.notification.alert("¡Las contraseña no coinciden!",null,"Registro de Usuario","Aceptar"),void(t.style.display="none");fetch(`${e}/registerUser`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullname:o,email:a,password:r})}).then((e=>e.json())).then((n=>{n.success?navigator.notification.alert("Usted se ha registrado correctamente!",function(t,n){const o={username:t,password:n};fetch(e+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{e.token&&(window.localStorage.setItem("auth",JSON.stringify(e)),window.location.href="index.html")}))}(a,r),"Registro de Usuario","Aceptar"):(t.style.display="none",navigator.notification.alert(n.msg,null,"Error en el registro","Aceptar"))})).catch((e=>{t.style.display="none",navigator.notification.alert("Por favor compruebe su conexión a Internet",null,"Error en el registro","Aceptar")}))}))})();